<%- include('../partials/head', { title: 'Admin otázky' }) %>
<section class="card">
  <h1 class="text-2xl font-bold">Otázky (CRUD)</h1>
  <form method="post" class="grid grid-cols-1 md:grid-cols-2 gap-2 mt-3">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    <select name="category" class="border p-2 rounded"><option value="pre">pre</option><option value="post">post</option></select>
    <input name="key" class="border p-2 rounded" placeholder="Q7" required>
    <input name="question_text" class="border p-2 rounded md:col-span-2" placeholder="Text otázky" required>
    <input name="option_a" class="border p-2 rounded" placeholder="Možnost A" required>
    <input name="option_b" class="border p-2 rounded" placeholder="Možnost B" required>
    <input name="option_c" class="border p-2 rounded" placeholder="Možnost C" required>
    <select name="correct_option" class="border p-2 rounded"><option>A</option><option>B</option><option>C</option></select>
    <input name="explanation" class="border p-2 rounded md:col-span-2" placeholder="Vysvětlení" required>
    <input name="topic_tag" class="border p-2 rounded" placeholder="topic tag" required>
    <input name="sort_order" type="number" min="1" value="1" class="border p-2 rounded">
    <button class="btn btn-primary md:col-span-2" type="submit">Uložit otázku</button>
  </form>
</section>
<section class="card mt-4 overflow-x-auto">
  <table class="w-full text-sm">
    <tr><th>ID</th><th>cat</th><th>key</th><th>text</th><th>akce</th></tr>
    <% questions.forEach((q) => { %>
      <tr class="border-t"><td><%= q.id %></td><td><%= q.category %></td><td><%= q.key %></td><td><%= q.question_text %></td><td>
        <form method="post" action="/admin/questions/<%= q.id %>/delete" onsubmit="return confirm('Smazat?')">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <button class="text-red-600" <%= demoMode ? 'disabled' : '' %>>Smazat</button>
        </form>
      </td></tr>
    <% }) %>
  </table>
  <a href="/admin" class="btn btn-secondary mt-3">Zpět</a>
</section>
<%- include('../partials/foot') %>
