<%- include('../partials/head', { title: 'Admin dashboard' }) %>
<section class="card">
  <h1 class="text-3xl font-bold">Admin dashboard</h1>
  <% if (demoMode) { %><p class="text-slate-300 mt-2">DEMO režim: CRUD je zamčený (read-only).</p><% } %>
  <div class="mt-3">
    <p>Sessions: <strong><%= summary.sessions %></strong></p>
    <p>Dokončení: <strong><%= summary.completed %></strong></p>
    <p>Průměrné zlepšení: <strong><%= summary.avg_improvement ?? 0 %></strong></p>
  </div>
</section>
<section class="card mt-4">
  <h2 class="text-2xl font-semibold">Nejčastější chyby (post-test)</h2>
  <ul class="list-disc pl-6 mt-3">
    <% topWrong.forEach((w) => { %><li><%= w.question_key %> – <%= w.mistakes %>×</li><% }) %>
  </ul>
</section>
<section class="card mt-4">
  <h2 class="text-2xl font-semibold">Poslední audit logy</h2>
  <ul class="text-sm mt-3">
    <% recentLogs.forEach((l) => { %><li><%= l.created_at %> | <%= l.admin_username %> | <%= l.action %> | <%= l.detail %></li><% }) %>
  </ul>
  <div class="flex gap-3 mt-4">
    <a class="btn btn-primary" href="/admin/modules">Moduly</a>
    <a class="btn btn-secondary" href="/admin/stats.csv">Export CSV</a>
    <a class="btn btn-secondary" href="/admin/logout">Odhlásit</a>
  </div>
</section>
<%- include('../partials/foot') %>
