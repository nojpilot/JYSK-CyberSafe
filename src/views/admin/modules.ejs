<%- include('../partials/head', { title: 'Admin moduly' }) %>
<section class="card">
  <h1 class="text-2xl font-bold">Moduly (CRUD)</h1>
  <form method="post" class="mt-3">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    <input name="slug" placeholder="slug" required>
    <input name="title" placeholder="Název" required>
    <input name="image" placeholder="/static/images/..." >
    <textarea name="story" placeholder="Příběh" required></textarea>
    <input name="correct_action" placeholder="Co je správně" required>
    <input name="tip1" placeholder="Tip 1" required>
    <input name="tip2" placeholder="Tip 2" required>
    <input name="sort_order" type="number" min="1" value="1">
    <button class="btn btn-primary" type="submit">Uložit modul</button>
  </form>
</section>
<section class="card mt-4">
  <ul>
    <% modules.forEach((m) => { %>
      <li class="mt-3">
        <strong><%= m.sort_order %>. <%= m.title %></strong> (<%= m.slug %>)
        <% if (m.image) { %><span class="text-sm text-slate-300"> • <%= m.image %></span><% } %>
        <form method="post" action="/admin/modules/<%= m.id %>/delete" class="inline" data-confirm="Smazat?">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <button class="text-red-600" <%= demoMode ? 'disabled' : '' %>>Smazat</button>
        </form>
      </li>
    <% }) %>
  </ul>
  <a href="/admin" class="btn btn-secondary mt-3">Zpět</a>
</section>
<%- include('../partials/foot') %>
